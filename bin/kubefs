#!/usr/bin/env python

import sys

sys.path.append(".")

# isort: split

import argparse
import logging

import fuse

from kube.async_loop import launch_in_background_thread
from kubefs.main import KubernetesFs

if __name__ == "__main__":
    import argparse

    parser = argparse.ArgumentParser()
    parser.add_argument("mount_point")
    args = parser.parse_args()

    async_loop = launch_in_background_thread()

    logging.basicConfig(
        level=logging.INFO,
        format="%(asctime)s %(threadName)s %(levelname)s %(name)s %(message)s)",
    )
    fuse = fuse.FUSE(KubernetesFs(), args.mount_point, foreground=True)
